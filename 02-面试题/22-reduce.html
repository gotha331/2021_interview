<!--
 * @Files: 
 * @Version: 1.0
 * @Author: jiang.liu
 * @Date: 2021-05-26 11:11:00
 * @LastEditors: jiang.liu
 * @LastEditTime: 2021-05-26 16:00:31
-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>reduce</title>
</head>
<body>
  <script>
  //  arr.reduce(function(prev,cur,index,arr) {
  // 
  //  },init) 
  // 或者
   //  arr.reduce(function(prev,cur,index,arr) {
  // 
  //  },) 

  // arr 表示原数组
  // prev 表示上一次调用回调时的返回值，或者初始值 init
  // cur 表示当前正在处理的数组元素
  // index 表示当前正在处理的数组元素的索引，若提供init值，则索引为0，否则索引为1
  // init 表示初始值

    var arr = [1, 2, 3, 4]

    // 求和
    var sum = arr.reduce((pre,cur,index,arr) => {
      console.log(pre,cur);
      console.log(index,arr);

      return pre + cur
    })
     console.log(sum);

    // 计算数组中每个元素出现的个数
    let person = ["许巍","李延亮","谢天笑","李健","许巍","谢天笑","谢天笑","谢天笑"]
    let obj = person.reduce((pre,cur) => {
      if(cur in pre) {
        pre[cur]++
      }else {
        pre[cur] = 1
      }
      return pre
    },{})
    console.log(obj);

    // 数组去重方法1
    let newArr = person.reduce((pre,cur) => {
      if(pre.indexOf(cur) == -1 ) {
        pre.push(cur)
      }

      return pre
    },[])
    console.log(newArr);

    // 数组去重方法2
    let newArr1 = person.reduce((pre,cur) =>{
      if(!pre.includes(cur)) {
        pre.push(cur)
      }

      return pre
    },[])
    console.log(newArr1);


    // 数组扁平化
    let arr2 = [1,[2,3,[4,5,6]],7,8]
    const newArr2 = (arr) => {
       return arr.reduce((pre,cur) => {
         return pre.concat(Array.isArray(cur) ? newArr2(cur) : cur)
      },[])
    }
    console.log(newArr2(arr2));


   
  </script>
</body>
</html>